
# Gal-Friday2 Outstanding Implementations Tracker

This document tracks all temporary, placeholder, and basic implementations that need to be replaced with production-ready code.

## Priority Levels
- **CRITICAL**: System cannot function properly without these
- **HIGH**: Major functionality is limited
- **MEDIUM**: Features work but need enhancement
- **LOW**: Code cleanup and optimization

---

## CRITICAL PRIORITY

### 1. Completely Unimplemented Data Providers
**File**: `/gal_friday/providers/database_provider.py`
- **Line 20**: `self.logger.info("DatabaseDataProvider not implemented")`
- **Issue**: Returns empty list instead of fetching actual data from database
- **Impact**: No database connectivity for historical data

**File**: `/gal_friday/providers/api_provider.py`
- **Line 20**: `self.logger.info("APIDataProvider not implemented")`
- **Issue**: Returns empty list instead of fetching from external APIs
- **Impact**: No external API data integration

---

## HIGH PRIORITY

### 1. Stub Classes in BacktestingEngine
**File**: `/gal_friday/backtesting_engine.py`
- **Lines 196-217**: `PubSubManagerStub` class
- **Lines 220-221**: `RiskManagerStub` class
- **Line 240**: `ExchangeInfoServiceImpl` stub
- **Line 436**: Placeholder method for trade data
- **Lines 2795, 2819**: Database and API loading placeholders
- **Impact**: Backtesting functionality severely limited

### 2. TA-Lib Integration Placeholder
**File**: `/gal_friday/backtesting_engine.py`
- **Lines 173-187**: Minimal placeholder for TA-Lib functionality
- **Issue**: ATR calculation returns hardcoded value of 20.0
- **Impact**: Technical indicators not properly calculated

### 3. Strategy Selection DAL Integration
**File**: `/gal_friday/strategy_selection.py`
- **Line 493**: `# Placeholder for now - should integrate with DAL`
- **Line 502**: `# Placeholder for now - should integrate with DAL`
- **Line 512**: `# Placeholder for now - should integrate with DAL`
- **Impact**: Strategy management not persisted

### 4. Monitoring Dashboard Mock Data
**File**: `/gal_friday/monitoring/dashboard_backend.py`
- **Line 441**: `# For now, return mock data`
- **Impact**: Dashboard shows fake data instead of real metrics

---

## MEDIUM PRIORITY

### 1. Simplified Market Price Service
**File**: `/gal_friday/simulated_market_price_service.py`
- **Lines 37-68**: `_DummyConfigManager` class as minimal placeholder
- **Line 525**: `# Simple implementation - would be more sophisticated in real system`
- **Lines 2740-2741**: Creating dummy historical data for examples

### 2. Feature Engine Simplifications
**File**: `/gal_friday/feature_engine.py`
- **Line 766**: `# This is a simplified version` (effective spread calculation)
- **Lines 4112-4122**: Example imputation logic with hardcoded rules
- **Line 4558**: `# Example business rules` for validation

**File**: `/gal_friday/feature_imputation.py`
- **Line 713**: `# Simple implementation: consider hour of day patterns`

### 3. Execution Handler Enhancements
**File**: `/gal_friday/execution_handler.py`
- **Lines 1810-1829**: `MinimalMarketDataService` class for shutdown decisions
- **Line 1822**: `# Basic implementation - could be enhanced with exchange hours`
- **Line 2483**: Hardcoded temporary error codes

**File**: `/gal_friday/execution/adapters.py`
- **Line 543**: `# For now, place individually but could be enhanced with AddOrderBatch`

### 4. Order Position Integration
**File**: `/gal_friday/execution/order_position_integration.py`
- **Line 417**: `# For now, just log that manual intervention is needed`
- **Line 437**: `# For now, placeholder implementation`

### 5. Model Return Type Placeholders
**File**: `/gal_friday/models/configuration.py`
- **Line 54**: `# Returning dict for now to satisfy type hint via forward reference`

**File**: `/gal_friday/models/order.py`
- **Line 103**: `# Returning dict for now`

**File**: `/gal_friday/models/signal.py`
- **Line 78**: `# Returning dict for now`

**File**: `/gal_friday/models/trade.py`
- **Line 99**: `# Returning dict for now`

### 6. Main Module Simplifications
**File**: `/gal_friday/main.py`
- **Line 401**: `# Basic capability checks (simplified - would need actual service availability checks)`
- **Line 615**: `# JSON formatter (simplified implementation)`
- **Line 1695**: `# We will use a temporary logger for db_pool`

### 7. Position Manager Assumptions
**File**: `/gal_friday/portfolio/position_manager.py`
- **Line 125**: `# For now, let's assume it just logs the number of active positions`
- **Line 392**: `# For now, assume we create a new one if the existing is inactive`
- **Line 407**: `# For now, ID will be auto-generated by DB if not provided`
- **Line 439**: `# Or, iterate all positions if not too many. For now, simplified:`

### 8. Reconciliation Service
**File**: `/gal_friday/portfolio/reconciliation_service.py`
- **Line 1219**: `For now, this method prepares the 'correction' dict for the report`
- **Line 1295**: `# For now, only saving auto_corrections as explicit adjustments`
- **Line 1387**: `# For now, let's assume it can fetch the model or we adapt`

### 9. Migration Manager
**File**: `/gal_friday/dal/migrations/migration_manager.py`
- **Line 39**: `# For now, subsequent calls will likely fail if alembic_cfg cannot be loaded`
- **Line 103**: `# For now, let's try to get script heads which doesn't require DB connection`
- **Line 112**: `# For now, sticking to a method that can get DB state if possible`

### 10. Experiment Management
**File**: `/gal_friday/model_lifecycle/experiment_manager.py`
- **Line 1019**: `# Add to active experiments (still using ExperimentConfig dataclass for now)`
- **Line 1405**: `# For now, assume a basic mapping or that ExperimentConfig adapts`

**File**: `/gal_friday/dal/repositories/experiment_repository.py`
- **Line 67**: `# For now, let's assume BaseRepository.create or a direct session.merge could work`
- **Line 134**: `# For now, let's just return the input or fetch it`

### 11. Monitoring Enhancements
**File**: `/gal_friday/monitoring/dashboard_backend.py`
- **Line 244**: `# For now, calculate based on position concentration`

**File**: `/gal_friday/monitoring/position_order_data_quality.py`
- **Line 347**: `# For now, placeholder for future enhancement`

### 12. WebSocket Client
**File**: `/gal_friday/execution/websocket_client.py`
- **Line 709**: `# For now, publish as execution report`

### 13. Simulated Execution Handler
**File**: `/gal_friday/simulated_execution_handler.py`
- **Line 608**: `# This is a placeholder for advancing bar time correctly`
- **Line 1646**: `# Construct a temporary event for simulating the SL market order`

---

## LOW PRIORITY

### 1. Example/Test Code in Production Files
**File**: `/gal_friday/simulated_market_price_service.py`
- **Lines 2733-2995**: Extensive example usage code
- **Line 2993**: `main_logger = logging.getLogger("SimulatedMarketPriceServiceExample")`

**File**: `/gal_friday/data_ingestor.py`
- **Line 1695**: `# Example Usage (for testing purposes - requires libraries installed)`
- **Line 1191**: `# This is a simplified implementation` for checksum calculation

### 2. Test Simplifications
**File**: `/scripts/train_initial_model.py`
- **Line 427**: `# this function. Simplified: fit only on train data for now`

**File**: `/tests/unit/test_feature_engine_pipeline_construction.py`
- **Line 224**: `# For now, we confirm default is applied`

**File**: `/tests/test_integration.py`
- **Line 277**: `# For now, just verify the test framework`

### 3. Minor Implementation Details
**File**: `/gal_friday/dal/models/position_adjustment.py`
- **Line 23**: Schema version assumption comment

**File**: `/gal_friday/utils/__init__.py`
- **Line 34**: `# For now, let the handlers manage the default if it remains None`

**File**: `/gal_friday/portfolio/position_manager.py`
- **Line 433**: `raise # Re-raise for now`
- **Line 451**: `# For now, keeping if the internal logic still uses them...`

---

## Implementation Strategy

1. **Start with CRITICAL items** - The system cannot function without proper data providers
2. **Move to HIGH priority** - Replace stubs and integrate with DAL
3. **Address MEDIUM items** - Enhance simplified implementations
4. **Clean up LOW priority** - Remove example code and improve test coverage

Each implementation should include:
- Proper error handling
- Comprehensive logging
- Unit tests
- Integration tests where applicable
- Documentation updates